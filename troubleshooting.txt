#include <IRremote.h>
int IRpin=6;
IRrecv IR(IRpin);
decode_results cmd;
String myCom;
int red=11;
int green=10;
int blue=9;
int i;
int r;
int j;
int k;
int f;
int a;
int dt=100;
int change=5;

void setup() {
  // put your setup code here, to run once:
Serial.begin(74800);
pinMode(red,OUTPUT);
pinMode(green,OUTPUT);
pinMode(blue,OUTPUT);
IR.enableIRIn();
}

void loop() {
  // put your main code here, to run repeatedly:
while (IR.decode(&cmd)==0){               //waits until first controller button is pressed after arduino starts
  
}
Serial.println(cmd.value,HEX);
IR.resume();


if (cmd.value==0xFFA25D){                //Off
  digitalWrite(red,LOW);
  digitalWrite(green,LOW);
  digitalWrite(blue,LOW);
}

if (cmd.value==0xFF30CF){               //red
  digitalWrite(red,HIGH);
  digitalWrite(green,LOW);
  digitalWrite(blue,LOW);
}

if (cmd.value==0xFF18E7){               //green
  digitalWrite(green,HIGH);
  digitalWrite(red,LOW);
  digitalWrite(blue,LOW);
}

if (cmd.value==0xFF7A85){       //blue
  digitalWrite(green,LOW);
  digitalWrite(red,LOW);
  digitalWrite(blue,HIGH);
  }


while (cmd.value==0xFF10EF){        //PROBLEM LOOP(this needs the fixing)
  digitalWrite(green,LOW);
  digitalWrite(blue,LOW);
  digitalWrite(red,HIGH);
for (i=0;i<=250;i=i+change){        //red on and green ramping up
  analogWrite(green,i);
  delay(dt);
}

digitalWrite(green,HIGH);         //green on and red ramping down
for (r=250;r>=0;r=r-change){
  analogWrite(red,r);
  delay(dt);
}

digitalWrite(green,HIGH);
for (j=0;j<=250;j=j+change){      //green on and blue ramping up
  analogWrite(blue,j);
  delay(dt);
}

digitalWrite(blue,HIGH);
for (k=250;k>=0;k=k-change){      //Blue on green ramping down
  analogWrite(green,k);
  delay(dt);
}
//blue on red ramping up
digitalWrite(blue,HIGH);          //blue on red ramping up
for (f=0;f<=250;f=f+change){
  analogWrite(red,f);
  delay(dt);
}

digitalWrite(red,HIGH);         //red on blue ramping down
for (a=250;a>=0;a=a-change){
  analogWrite(blue,a);
  delay(dt);
}
digitalWrite(red,HIGH);         //without this the red only flashes quickly
delay(1000);
}                               //end of while loop

}                               //end of void loop